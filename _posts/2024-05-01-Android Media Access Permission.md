---
layout: post
title: Android 多媒體檔案權限 - 部分存取
tag: [Android, Kotlin, Permission, Media, Image, Video]
---

## 概述

小小前情提要一下，近幾年 Android 版本更新時總是會去調整各種的權限取用限制，其中更令人煩躁的就是檔案存取的權限。

還記得 Android 10 開始因為導入了 Scoped Storage 的機制，APP 開發時被禁止使用絕對路徑去存取公共儲存空間的資料，讓用戶的隱私有更好的保護，避免被惡意的任意存取裝置上各種檔案。

從那之後我們要寫入或存取相片、影片、音樂等等共用資源的檔案時，通常都改用 MediaStore 來進行操作。到這個時候我們在寫入檔案時是不用進行權限索取的，不過要讀取檔案的話則需要索取 `READ_EXTERNAL_STORAGE` 權限才能夠取用。

還記得那個時候有大量個網路文章、問題都是在詢問或是幫忙解決這個問題，而當時 Google 可能也知道這個改動會影響到大量的應用，而許多應用應該也沒辦法這麼快的完成調整以符合這個規範，因此他們有額外提供一個臨時的屬性 `requestLegacyExternalStorage`。只要將這個屬性設定為 `true` 那麼 APP 就還是可以透過絕對路徑來存取公共資源的檔案。